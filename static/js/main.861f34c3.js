(()=>{"use strict";var e={7936:(e,t,o)=>{var r=o(9993),n=o(6665),a=o(3929),l=o(6283),i=o(9685),s=o(3701);const d="#FF6B35",c="#F7931E",u="#FFB84D",g="#4CAF50",h="#FF9800",f="#F44336",y="#FFF3E0",m="#FFFFFF",x="#2C3E50",p="#7F8C8D",b="#E0E0E0",w="#000000",j=s.default.create({container:{flex:1,backgroundColor:y},centered:{flex:1,justifyContent:"center",alignItems:"center"},padding:{padding:20,paddingTop:80},margin:{margin:10},shadow:{shadowColor:w,shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},card:{backgroundColor:m,borderRadius:15,padding:20,marginVertical:10,shadowColor:w,shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},button:{backgroundColor:d,borderRadius:25,paddingVertical:15,paddingHorizontal:30,alignItems:"center",marginVertical:10,shadowColor:w,shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},buttonText:{color:m,fontSize:18,fontWeight:"bold"},secondaryButton:{backgroundColor:c,borderRadius:25,paddingVertical:12,paddingHorizontal:25,alignItems:"center",marginVertical:8},outlineButton:{backgroundColor:"transparent",borderWidth:2,borderColor:d,borderRadius:25,paddingVertical:12,paddingHorizontal:25,alignItems:"center",justifyContent:"center",marginVertical:8},outlineButtonText:{color:d,fontSize:16,fontWeight:"bold",textAlign:"center"},title:{fontSize:24,fontWeight:"300",color:"rgba(255, 255, 255, 0.7)",textAlign:"center",marginBottom:30,marginTop:10},subtitle:{fontSize:22,fontWeight:"bold",color:x,marginBottom:15},text:{fontSize:16,color:x,lineHeight:24},textInput:{backgroundColor:m,borderRadius:10,padding:15,fontSize:16,borderWidth:1,borderColor:b,marginVertical:10},row:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},column:{flexDirection:"column"},flex1:{flex:1},textCenter:{textAlign:"center"},textBold:{fontWeight:"bold"},marginTop:{marginTop:20},marginBottom:{marginBottom:20}});let S;S={setItem:async(e,t)=>{try{localStorage.setItem(e,t)}catch(o){console.error("localStorage error:",o)}},getItem:async e=>{try{return localStorage.getItem(e)}catch(t){return console.error("localStorage error:",t),null}},removeItem:async e=>{try{localStorage.removeItem(e)}catch(t){console.error("localStorage error:",t)}}};const C=S;const B="smoki_players",z="smoki_games",k="smoki_game_rounds",T=async()=>{try{const e=await C.getItem(B);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting players:",e),[]}},v=async()=>{try{const e=await C.getItem(z);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting games:",e),[]}},P=async()=>{try{const e=await C.getItem(k);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting game rounds:",e),[]}},I=async()=>await T(),R=async(e,t)=>{try{const o=await T(),r=o.findIndex(t=>t.id===e);return-1!==r?(o[r].totalGames+=1,1===t?o[r].firstPlace+=1:2===t?o[r].secondPlace+=1:3===t&&(o[r].thirdPlace+=1),await C.setItem(B,JSON.stringify(o)),{success:!0}):{success:!1}}catch(o){throw console.error("Error updating player stats:",o),o}},O=async(e,t,o=!1)=>{try{const r=await v(),n=r.findIndex(t=>t.id===e);return-1!==n?(r[n].players=JSON.stringify(t.players),r[n].currentState=JSON.stringify(t),r[n].isCompleted=o?1:0,await C.setItem(z,JSON.stringify(r)),{success:!0}):{success:!1}}catch(r){throw console.error("Error updating game:",r),r}};var W=o(397);const E=({navigation:e})=>{const[t,o]=(0,n.useState)(!0),[r,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{h()},[]),(0,n.useEffect)(()=>{f();const e=setInterval(f,1e3);return()=>clearInterval(e)},[]);const h=async()=>{try{console.log("Initializing app..."),await(async()=>{try{const e=await T(),t=await v(),o=await P();return e&&void 0!==e.length||await C.setItem(B,JSON.stringify([])),t&&void 0!==t.length||await C.setItem(z,JSON.stringify([])),o&&void 0!==o.length||await C.setItem(k,JSON.stringify([])),Promise.resolve()}catch(e){return console.error("Error initializing web database:",e),Promise.resolve()}})(),console.log("Database initialized successfully"),await f(),console.log("Active game check completed")}catch(e){console.error("Error initializing app:",e)}finally{o(!1)}},f=async()=>{try{const e=await(async()=>{try{const e=(await v()).find(e=>0===e.isCompleted);return e?Object.assign({},e,{players:JSON.parse(e.players),currentState:JSON.parse(e.currentState)}):null}catch(e){return console.error("Error getting active game:",e),null}})();e?(s(!0),u(e)):(s(!1),u(null))}catch(e){console.error("Error checking for active game:",e),s(!1),u(null)}};return t?(0,W.jsx)(a.default,{style:[j.centered,{backgroundColor:d}],children:(0,W.jsx)(l.default,{style:{fontSize:24,color:"white"},children:"\ud83d\udc09 \u0141adowanie Smoki..."})}):(0,W.jsxs)(a.default,{style:[j.container,j.centered,{backgroundColor:d}],children:[(0,W.jsx)(l.default,{style:{fontSize:48,fontWeight:"bold",color:"white",marginBottom:20,textAlign:"center"},children:"\ud83d\udc09 SMOKI"}),(0,W.jsx)(l.default,{style:{fontSize:18,color:"white",marginBottom:40,textAlign:"center"},children:"by Ma\u015blak"}),r&&(0,W.jsx)(i.default,{style:{backgroundColor:g,padding:15,borderRadius:10,marginVertical:10,minWidth:200,alignItems:"center"},onPress:()=>{if(c){const t={id:c.id,players:c.players,currentRound:c.currentState.currentRound||1};e.navigate("Game",{gameData:t,resumeGame:!0})}},children:(0,W.jsx)(l.default,{style:{fontSize:18,color:"white",fontWeight:"bold"},children:"\u25b6\ufe0f Kontynuuj gr\u0119"})}),(0,W.jsx)(i.default,{style:{backgroundColor:"white",padding:15,borderRadius:10,marginVertical:10,minWidth:200,alignItems:"center"},onPress:()=>{e.navigate("Players")},children:(0,W.jsx)(l.default,{style:{fontSize:18,color:d,fontWeight:"bold"},children:"\ud83d\udc65 Gracze"})}),(0,W.jsx)(i.default,{style:{backgroundColor:"white",padding:15,borderRadius:10,marginVertical:10,minWidth:200,alignItems:"center"},onPress:()=>{e.navigate("PlayerSelection")},children:(0,W.jsx)(l.default,{style:{fontSize:18,color:d,fontWeight:"bold"},children:"\ud83c\udfae Nowa Gra"})})]})};var F=o(6773),D=o(8264),N=o(3454);const H={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:20,backgroundColor:d},backButton:{padding:10},backButtonText:{color:"white",fontSize:16,fontWeight:"bold"},title:{fontSize:24,fontWeight:"bold",color:"white"},addButton:{backgroundColor:"white",paddingHorizontal:15,paddingVertical:8,borderRadius:20},addButtonText:{color:d,fontWeight:"bold"},playersList:{flex:1},playerCard:{backgroundColor:"white",borderRadius:10,padding:15,marginVertical:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},playerInfo:{flex:1},playerName:{fontSize:18,fontWeight:"bold",color:x,marginBottom:5},playerStats:{fontSize:14,color:p},playerActions:{flexDirection:"row",gap:10},actionButton:{width:40,height:40,borderRadius:20,justifyContent:"center",alignItems:"center"},actionButtonText:{fontSize:16},emptyState:{alignItems:"center",marginTop:50},emptyStateText:{fontSize:16,color:p,textAlign:"center"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"white",borderRadius:20,padding:30,width:"80%",maxWidth:400},modalTitle:{fontSize:20,fontWeight:"bold",textAlign:"center",marginBottom:20,color:x},textInput:{borderWidth:1,borderColor:b,borderRadius:10,padding:15,fontSize:16,marginBottom:20},modalButtons:{flexDirection:"row",justifyContent:"space-between",gap:10},modalButton:{flex:1,padding:15,borderRadius:10,alignItems:"center"},modalButtonText:{fontSize:16,fontWeight:"bold",color:"white"}},A=({navigation:e})=>{const[t,o]=(0,n.useState)([]),[r,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),[g,m]=(0,n.useState)(""),[b,w]=(0,n.useState)(!0);(0,n.useEffect)(()=>{S()},[]);const S=async()=>{try{w(!0);const e=await I();o(e||[])}catch(e){console.error("Error loading players:",e),o([])}finally{w(!1)}},z=async e=>{if(confirm("Czy na pewno chcesz usun\u0105\u0107 tego gracza?"))try{await(async e=>{try{const t=(await T()).filter(t=>t.id!==e);return await C.setItem(B,JSON.stringify(t)),{success:!0}}catch(t){throw console.error("Error deleting player:",t),t}})(e),await S()}catch(t){console.error("Error deleting player:",t)}};return b?(0,W.jsx)(a.default,{style:[j.centered,{backgroundColor:y}],children:(0,W.jsx)(l.default,{style:{fontSize:24,color:x},children:"\u0141adowanie graczy..."})}):(0,W.jsxs)(a.default,{style:[j.container,{backgroundColor:y}],children:[(0,W.jsxs)(a.default,{style:H.header,children:[(0,W.jsx)(i.default,{onPress:e.goBack,style:H.backButton,children:(0,W.jsx)(l.default,{style:H.backButtonText,children:"\u2190 Powr\xf3t"})}),(0,W.jsx)(l.default,{style:H.title,children:"\ud83d\udc65 Gracze"}),(0,W.jsx)(i.default,{onPress:()=>s(!0),style:H.addButton,children:(0,W.jsx)(l.default,{style:H.addButtonText,children:"+ Dodaj"})})]}),(0,W.jsx)(N.default,{style:H.playersList,contentContainerStyle:{padding:20},children:0===t.length?(0,W.jsx)(a.default,{style:H.emptyState,children:(0,W.jsx)(l.default,{style:H.emptyStateText,children:"Brak graczy. Dodaj pierwszego gracza!"})}):t.map(e=>(0,W.jsxs)(a.default,{style:H.playerCard,children:[(0,W.jsxs)(a.default,{style:H.playerInfo,children:[(0,W.jsx)(l.default,{style:H.playerName,children:e.name}),(0,W.jsxs)(l.default,{style:H.playerStats,children:["\ud83c\udfc6 ",e.firstPlace," \ud83e\udd48 ",e.secondPlace," \ud83e\udd49 ",e.thirdPlace," | Gry: ",e.totalGames]})]}),(0,W.jsxs)(a.default,{style:H.playerActions,children:[(0,W.jsx)(i.default,{style:[H.actionButton,{backgroundColor:h}],onPress:()=>(e=>{u(e),m(e.name),s(!0)})(e),children:(0,W.jsx)(l.default,{style:H.actionButtonText,children:"\u270f\ufe0f"})}),(0,W.jsx)(i.default,{style:[H.actionButton,{backgroundColor:f}],onPress:()=>z(e.id),children:(0,W.jsx)(l.default,{style:H.actionButtonText,children:"\ud83d\uddd1\ufe0f"})})]})]},e.id))}),(0,W.jsx)(D.default,{visible:r,transparent:!0,animationType:"slide",onRequestClose:()=>s(!1),children:(0,W.jsx)(a.default,{style:H.modalOverlay,children:(0,W.jsxs)(a.default,{style:H.modalContent,children:[(0,W.jsx)(l.default,{style:H.modalTitle,children:c?"Edytuj gracza":"Dodaj gracza"}),(0,W.jsx)(F.default,{style:H.textInput,placeholder:"Imi\u0119 gracza",value:g,onChangeText:m,autoFocus:!0}),(0,W.jsxs)(a.default,{style:H.modalButtons,children:[(0,W.jsx)(i.default,{style:[H.modalButton,{backgroundColor:p}],onPress:()=>{s(!1),m(""),u(null)},children:(0,W.jsx)(l.default,{style:H.modalButtonText,children:"Anuluj"})}),(0,W.jsx)(i.default,{style:[H.modalButton,{backgroundColor:d}],onPress:async()=>{if(g.trim())try{c?await(async(e,t)=>{try{const o=await T(),r=o.findIndex(t=>t.id===e);return-1!==r?(o[r].name=t,await C.setItem(B,JSON.stringify(o)),{success:!0}):{success:!1}}catch(o){throw console.error("Error updating player:",o),o}})(c.id,g.trim()):await(async e=>{try{const t=await T(),o={id:Date.now(),name:e,totalGames:0,firstPlace:0,secondPlace:0,thirdPlace:0};if(t.find(t=>t.name===e))throw new Error("Player already exists");return t.push(o),await C.setItem(B,JSON.stringify(t)),o.id}catch(t){throw console.error("Error adding player:",t),t}})(g.trim()),await S(),s(!1),m(""),u(null)}catch(e){console.error("Error saving player:",e),alert("B\u0142\u0105d: "+e.message)}},children:(0,W.jsx)(l.default,{style:[H.modalButtonText,{color:"white"}],children:c?"Zapisz":"Dodaj"})})]})]})})})]})},G={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:20,backgroundColor:d},backButton:{padding:10},backButtonText:{color:"white",fontSize:16,fontWeight:"bold"},title:{fontSize:20,fontWeight:"bold",color:"white"},counterContainer:{backgroundColor:"white",paddingHorizontal:12,paddingVertical:6,borderRadius:15},counterText:{color:d,fontWeight:"bold",fontSize:14},selectedSection:{backgroundColor:"white",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},selectedTitle:{fontSize:16,fontWeight:"bold",color:x,marginBottom:10},selectedPlayersContainer:{flexDirection:"row",gap:10},selectedPlayerChip:{backgroundColor:d,paddingHorizontal:12,paddingVertical:6,borderRadius:15},selectedPlayerChipText:{color:"white",fontSize:12,fontWeight:"bold"},playersList:{flex:1,marginTop:10},playerCard:{backgroundColor:"white",borderRadius:10,padding:15,marginVertical:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,borderWidth:2,borderColor:"transparent"},selectedPlayerCard:{borderColor:d,backgroundColor:"#FFF7F3"},playerInfo:{flex:1},playerName:{fontSize:18,fontWeight:"bold",color:x,marginBottom:5},selectedPlayerName:{color:d},playerStats:{fontSize:14,color:p},selectedPlayerStats:{color:d},selectionIndicator:{width:30,height:30,borderRadius:15,borderWidth:2,borderColor:p,justifyContent:"center",alignItems:"center"},selectedIndicator:{backgroundColor:d,borderColor:d},selectionText:{fontSize:16,fontWeight:"bold",color:p},emptyState:{alignItems:"center",marginTop:50},emptyStateText:{fontSize:16,color:p,textAlign:"center",marginBottom:20},addPlayersButton:{backgroundColor:d,paddingHorizontal:20,paddingVertical:12,borderRadius:10},addPlayersButtonText:{color:"white",fontSize:16,fontWeight:"bold"},startButtonContainer:{padding:20,backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:-2},shadowOpacity:.1,shadowRadius:4,elevation:5},startButton:{backgroundColor:g,padding:18,borderRadius:12,alignItems:"center"},startButtonText:{color:"white",fontSize:18,fontWeight:"bold"}},V=({navigation:e})=>{const[t,o]=(0,n.useState)([]),[r,s]=(0,n.useState)([]),[d,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{u()},[]);const u=async()=>{try{c(!0);const e=await I();o(e||[])}catch(e){console.error("Error loading players:",e),o([])}finally{c(!1)}};return d?(0,W.jsx)(a.default,{style:[j.centered,{backgroundColor:y}],children:(0,W.jsx)(l.default,{style:{fontSize:24,color:x},children:"\u0141adowanie graczy..."})}):(0,W.jsxs)(a.default,{style:[j.container,{backgroundColor:y}],children:[(0,W.jsxs)(a.default,{style:G.header,children:[(0,W.jsx)(i.default,{onPress:e.goBack,style:G.backButton,children:(0,W.jsx)(l.default,{style:G.backButtonText,children:"\u2190 Powr\xf3t"})}),(0,W.jsx)(l.default,{style:G.title,children:"\ud83c\udfae Wybierz Graczy"}),(0,W.jsx)(a.default,{style:G.counterContainer,children:(0,W.jsxs)(l.default,{style:G.counterText,children:[r.length,"/6"]})})]}),(0,W.jsx)(N.default,{style:G.playersList,contentContainerStyle:{padding:20},children:0===t.length?(0,W.jsxs)(a.default,{style:G.emptyState,children:[(0,W.jsx)(l.default,{style:G.emptyStateText,children:'Brak graczy. Dodaj graczy w sekcji "Gracze" przed rozpocz\u0119ciem gry!'}),(0,W.jsx)(i.default,{style:G.addPlayersButton,onPress:()=>e.navigate("Players"),children:(0,W.jsx)(l.default,{style:G.addPlayersButtonText,children:"\ud83d\udc65 Dodaj Graczy"})})]}):t.map(e=>{const t=r.find(t=>t.id===e.id);return(0,W.jsxs)(i.default,{style:[G.playerCard,t&&G.selectedPlayerCard],onPress:()=>(e=>{r.find(t=>t.id===e.id)?s(r.filter(t=>t.id!==e.id)):r.length<6?s([...r,e]):alert("Maksymalnie 6 graczy mo\u017ce bra\u0107 udzia\u0142 w grze!")})(e),children:[(0,W.jsxs)(a.default,{style:G.playerInfo,children:[(0,W.jsx)(l.default,{style:[G.playerName,t&&G.selectedPlayerName],children:e.name}),(0,W.jsxs)(l.default,{style:[G.playerStats,t&&G.selectedPlayerStats],children:["\ud83c\udfc6 ",e.firstPlace," \ud83e\udd48 ",e.secondPlace," \ud83e\udd49 ",e.thirdPlace," | Gry: ",e.totalGames]})]}),(0,W.jsx)(a.default,{style:[G.selectionIndicator,t&&G.selectedIndicator],children:(0,W.jsx)(l.default,{style:G.selectionText,children:t?"\u2713":"\u25cb"})})]},e.id)})}),r.length>=2&&(0,W.jsx)(a.default,{style:G.startButtonContainer,children:(0,W.jsx)(i.default,{style:G.startButton,onPress:()=>{r.length<2?alert("Wybierz co najmniej 2 graczy!"):e.navigate("PlayerOrder",{selectedPlayers:r})},children:(0,W.jsxs)(l.default,{style:G.startButtonText,children:["\u27a1\ufe0f Ustaw kolejno\u015b\u0107 (",r.length," graczy)"]})})})]})},J={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:20,backgroundColor:d},backButton:{padding:10},backButtonText:{color:"white",fontSize:16,fontWeight:"bold"},title:{fontSize:18,fontWeight:"bold",color:"white"},shuffleButton:{backgroundColor:"white",paddingHorizontal:12,paddingVertical:8,borderRadius:20},shuffleButtonText:{color:d,fontWeight:"bold",fontSize:14},instructionsContainer:{backgroundColor:"#E3F2FD",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10},instructionsText:{fontSize:14,color:x,textAlign:"center"},orderPreview:{backgroundColor:"white",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},orderPreviewTitle:{fontSize:16,fontWeight:"bold",color:x,marginBottom:8},orderPreviewText:{fontSize:14,color:d,fontWeight:"500"},playersList:{flex:1,marginTop:10},playerCard:{backgroundColor:"white",borderRadius:12,padding:15,marginVertical:5,flexDirection:"row",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},orderNumber:{width:40,height:40,borderRadius:20,backgroundColor:d,justifyContent:"center",alignItems:"center",marginRight:15},orderNumberText:{color:"white",fontSize:18,fontWeight:"bold"},playerInfo:{flex:1},playerName:{fontSize:18,fontWeight:"bold",color:x,marginBottom:4},playerStats:{fontSize:12,color:p},moveButtons:{gap:5},moveButton:{width:36,height:36,borderRadius:18,backgroundColor:u,justifyContent:"center",alignItems:"center"},disabledButton:{backgroundColor:b},moveButtonText:{fontSize:18,fontWeight:"bold",color:"white"},disabledButtonText:{color:p},tipsContainer:{backgroundColor:"#FFF3E0",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10},tipsTitle:{fontSize:14,fontWeight:"bold",color:x,marginBottom:8},tipsText:{fontSize:12,color:p,lineHeight:18},startButtonContainer:{padding:20,backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:-2},shadowOpacity:.1,shadowRadius:4,elevation:5},startButton:{backgroundColor:g,padding:18,borderRadius:12,alignItems:"center"},startButtonText:{color:"white",fontSize:18,fontWeight:"bold"}},L=({navigation:e,route:t})=>{const{selectedPlayers:o}=t.params,[r,s]=(0,n.useState)([...o]);return(0,W.jsxs)(a.default,{style:[j.container,{backgroundColor:y}],children:[(0,W.jsxs)(a.default,{style:J.header,children:[(0,W.jsx)(i.default,{onPress:e.goBack,style:J.backButton,children:(0,W.jsx)(l.default,{style:J.backButtonText,children:"\u2190 Powr\xf3t"})}),(0,W.jsx)(l.default,{style:J.title,children:"\ud83c\udfaf Kolejno\u015b\u0107 Graczy"}),(0,W.jsx)(i.default,{onPress:()=>{const e=[...r];for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}s(e)},style:J.shuffleButton,children:(0,W.jsx)(l.default,{style:J.shuffleButtonText,children:"\ud83c\udfb2 Losuj"})})]}),(0,W.jsxs)(a.default,{style:J.orderPreview,children:[(0,W.jsx)(l.default,{style:J.orderPreviewTitle,children:"Kolejno\u015b\u0107 gry:"}),(0,W.jsx)(l.default,{style:J.orderPreviewText,children:r.map((e,t)=>`${t+1}. ${e.name}`).join(" \u2192 ")})]}),(0,W.jsx)(N.default,{style:J.playersList,contentContainerStyle:{padding:20},children:r.map((e,t)=>(0,W.jsxs)(a.default,{style:J.playerCard,children:[(0,W.jsx)(a.default,{style:J.orderNumber,children:(0,W.jsx)(l.default,{style:J.orderNumberText,children:t+1})}),(0,W.jsxs)(a.default,{style:J.playerInfo,children:[(0,W.jsx)(l.default,{style:J.playerName,children:e.name}),(0,W.jsxs)(l.default,{style:J.playerStats,children:["\ud83c\udfc6 ",e.firstPlace," \ud83e\udd48 ",e.secondPlace," \ud83e\udd49 ",e.thirdPlace," | Gry: ",e.totalGames]})]}),(0,W.jsxs)(a.default,{style:J.moveButtons,children:[(0,W.jsx)(i.default,{style:[J.moveButton,0===t&&J.disabledButton],onPress:()=>(e=>{if(0===e)return;const t=[...r];[t[e-1],t[e]]=[t[e],t[e-1]],s(t)})(t),disabled:0===t,children:(0,W.jsx)(l.default,{style:[J.moveButtonText,0===t&&J.disabledButtonText],children:"\u2191"})}),(0,W.jsx)(i.default,{style:[J.moveButton,t===r.length-1&&J.disabledButton],onPress:()=>(e=>{if(e===r.length-1)return;const t=[...r];[t[e],t[e+1]]=[t[e+1],t[e]],s(t)})(t),disabled:t===r.length-1,children:(0,W.jsx)(l.default,{style:[J.moveButtonText,t===r.length-1&&J.disabledButtonText],children:"\u2193"})})]})]},e.id))}),(0,W.jsx)(a.default,{style:J.startButtonContainer,children:(0,W.jsx)(i.default,{style:J.startButton,onPress:()=>{const t={players:r.map((e,t)=>Object.assign({},e,{order:t+1,totalScore:0,rounds:[]}))};e.navigate("Game",{gameData:t})},children:(0,W.jsx)(l.default,{style:J.startButtonText,children:"\ud83d\ude80 Rozpocznij Gr\u0119!"})})})]})},M={modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.7)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"white",borderRadius:20,padding:20,width:"85%",maxWidth:350},modalTitle:{fontSize:18,fontWeight:"bold",textAlign:"center",marginBottom:20,color:x},display:{backgroundColor:"#F5F5F5",borderRadius:10,padding:20,marginBottom:20,alignItems:"center"},displayText:{fontSize:32,fontWeight:"bold",color:d,minHeight:40},numpad:{marginBottom:20},numpadRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},numberButton:{width:70,height:70,borderRadius:35,backgroundColor:d,justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:3},numberButtonText:{fontSize:24,fontWeight:"bold",color:"white"},actionButton:{width:70,height:70,borderRadius:35,backgroundColor:p,justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:3},actionButtonText:{fontSize:20,fontWeight:"bold",color:"white"},actionButtons:{flexDirection:"row",justifyContent:"space-between",gap:15},cancelButton:{flex:1,padding:15,borderRadius:10,backgroundColor:p,alignItems:"center"},cancelButtonText:{fontSize:16,fontWeight:"bold",color:"white"},submitButton:{flex:1,padding:15,borderRadius:10,backgroundColor:g,alignItems:"center"},submitButtonText:{fontSize:16,fontWeight:"bold",color:"white"}},$=({visible:e,onClose:t,onSubmit:o,title:r,currentValue:s=""})=>{const[d,c]=n.useState(s);n.useEffect(()=>{c(s)},[s,e]);const u=e=>(0,W.jsx)(i.default,{style:M.numberButton,onPress:()=>(e=>{d.length<4&&c(d+e)})(e.toString()),children:(0,W.jsx)(l.default,{style:M.numberButtonText,children:e})},e);return(0,W.jsx)(D.default,{visible:e,transparent:!0,animationType:"slide",onRequestClose:t,children:(0,W.jsx)(a.default,{style:M.modalOverlay,children:(0,W.jsxs)(a.default,{style:M.modalContent,children:[(0,W.jsx)(l.default,{style:M.modalTitle,children:r}),(0,W.jsx)(a.default,{style:M.display,children:(0,W.jsx)(l.default,{style:M.displayText,children:d||"0"})}),(0,W.jsxs)(a.default,{style:M.numpad,children:[(0,W.jsxs)(a.default,{style:M.numpadRow,children:[u(1),u(2),u(3)]}),(0,W.jsxs)(a.default,{style:M.numpadRow,children:[u(4),u(5),u(6)]}),(0,W.jsxs)(a.default,{style:M.numpadRow,children:[u(7),u(8),u(9)]}),(0,W.jsxs)(a.default,{style:M.numpadRow,children:[(0,W.jsx)(i.default,{style:M.actionButton,onPress:()=>{""===d||"0"===d?c("-"):"-"===d?c(""):d.startsWith("-")?c(d.substring(1)):c("-"+d)},children:(0,W.jsx)(l.default,{style:M.actionButtonText,children:"+/-"})}),u(0),(0,W.jsx)(i.default,{style:M.actionButton,onPress:()=>{c(d.slice(0,-1))},children:(0,W.jsx)(l.default,{style:M.actionButtonText,children:"\u232b"})})]})]}),(0,W.jsxs)(a.default,{style:M.actionButtons,children:[(0,W.jsx)(i.default,{style:M.cancelButton,onPress:t,children:(0,W.jsx)(l.default,{style:M.cancelButtonText,children:"Anuluj"})}),(0,W.jsx)(i.default,{style:M.submitButton,onPress:()=>{o(d),t()},children:(0,W.jsx)(l.default,{style:M.submitButtonText,children:"OK"})})]})]})})})},_={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:15,backgroundColor:d},headerButton:{padding:10},headerButtonText:{color:"white",fontSize:14,fontWeight:"bold"},headerCenter:{alignItems:"center"},headerTitle:{fontSize:20,fontWeight:"bold",color:"white"},roundText:{fontSize:14,color:"white",opacity:.9},rulesContainer:{backgroundColor:"#E3F2FD",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10},rulesText:{fontSize:14,color:x,textAlign:"center"},playersList:{flex:1,marginTop:10},playerCard:{backgroundColor:"white",borderRadius:12,padding:15,marginVertical:8,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},eliminatedPlayerCard:{backgroundColor:"#FFEBEE",opacity:.7},playerHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},playerName:{fontSize:18,fontWeight:"bold",color:x},eliminatedPlayerName:{color:f,textDecorationLine:"line-through"},playerScore:{fontSize:20,fontWeight:"bold",color:d},eliminatedPlayerScore:{color:f},scoreInputContainer:{flexDirection:"row",alignItems:"center",marginBottom:10},roundLabel:{fontSize:16,color:x,marginRight:10,flex:1},scoreButton:{borderWidth:2,borderColor:d,borderRadius:8,padding:12,backgroundColor:d,width:80,alignItems:"center"},scoreButtonText:{fontSize:18,fontWeight:"bold",color:"white"},eliminatedScoreButton:{backgroundColor:"#F5F5F5",borderColor:p},eliminatedScoreButtonText:{color:p},roundHistory:{marginTop:5},roundHistoryTitle:{fontSize:12,color:p,marginBottom:2},roundHistoryText:{fontSize:12,color:p},submitButtonContainer:{padding:20,backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:-2},shadowOpacity:.1,shadowRadius:4,elevation:5},submitButton:{backgroundColor:g,padding:18,borderRadius:12,alignItems:"center"},submitButtonText:{color:"white",fontSize:16,fontWeight:"bold"},gameEndTitle:{fontSize:32,fontWeight:"bold",color:"white",textAlign:"center",marginBottom:20},winnerText:{fontSize:24,fontWeight:"bold",color:"white",textAlign:"center",marginBottom:10},winnerScore:{fontSize:18,color:"white",textAlign:"center",marginBottom:30},finalRanking:{backgroundColor:"white",borderRadius:15,padding:20,marginHorizontal:20,marginBottom:30},rankingTitle:{fontSize:18,fontWeight:"bold",color:x,textAlign:"center",marginBottom:15},rankingItem:{fontSize:16,color:x,textAlign:"center",marginVertical:3},backButton:{backgroundColor:"white",paddingHorizontal:30,paddingVertical:15,borderRadius:25,marginHorizontal:40},backButtonText:{color:g,fontSize:18,fontWeight:"bold",textAlign:"center"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"white",borderRadius:20,padding:30,width:"80%",maxWidth:400},modalTitle:{fontSize:20,fontWeight:"bold",textAlign:"center",marginBottom:15,color:x},modalText:{fontSize:16,textAlign:"center",marginBottom:25,color:p},modalButtons:{flexDirection:"row",justifyContent:"space-between",gap:10},modalButton:{flex:1,padding:15,borderRadius:10,alignItems:"center"},modalButtonText:{fontSize:16,fontWeight:"bold",color:"white"}},K=({navigation:e,route:t})=>{const{gameData:o,resumeGame:r}=t.params,[s,d]=(0,n.useState)((r&&o.players,o.players)),[c,u]=(0,n.useState)(r&&o.currentRound?o.currentRound:1),[h,m]=(0,n.useState)({}),[x,b]=(0,n.useState)(!1),[w,S]=(0,n.useState)(null),[B,k]=(0,n.useState)(!1),[T,P]=(0,n.useState)(!1),[I,E]=(0,n.useState)(null),[F,H]=(0,n.useState)(r?o.id:null);(0,n.useEffect)(()=>{A()},[s]);const A=async()=>{if(s.filter(e=>e.totalScore>=101).length>0){const t=[...s].sort((e,t)=>e.totalScore-t.totalScore),o=t[0].totalScore,r=t.filter(e=>e.totalScore===o);if(S(r[0]),b(!0),F)try{const e={players:t,currentRound:c,lastUpdated:(new Date).toISOString(),finished:!0};await O(F,e,!0),console.log("Game marked as completed")}catch(e){console.error("Error marking game as completed:",e)}try{let e=1,o=null,r=0;for(let n=0;n<t.length;n++){const a=t[n];null!==o&&a.totalScore!==o?(e+=r,r=1):r++,await R(a.id,e),o=a.totalScore}console.log("Player statistics updated successfully with tie handling")}catch(e){console.error("Error updating player statistics:",e)}}};return x&&w?(0,W.jsxs)(a.default,{style:[j.container,j.centered,{backgroundColor:g}],children:[(0,W.jsx)(l.default,{style:_.gameEndTitle,children:"\ud83c\udf89 Gra zako\u0144czona! \ud83c\udf89"}),(0,W.jsxs)(l.default,{style:_.winnerText,children:["Zwyci\u0119zca: ",w.name]}),(0,W.jsxs)(l.default,{style:_.winnerScore,children:["Wynik: ",w.totalScore," punkt\xf3w"]}),(0,W.jsxs)(a.default,{style:_.finalRanking,children:[(0,W.jsx)(l.default,{style:_.rankingTitle,children:"Ko\u0144cowy ranking:"}),(()=>{const e=[...s].sort((e,t)=>e.totalScore-t.totalScore);let t=1,o=null,r=0;return e.map((e,n)=>{null!==o&&e.totalScore!==o?(t+=r,r=1):r++;const a=t;return o=e.totalScore,(0,W.jsxs)(l.default,{style:_.rankingItem,children:[a,". ",e.name,": ",e.totalScore," pkt",1===a&&" \ud83c\udfc6",2===a&&" \ud83e\udd48",3===a&&" \ud83e\udd49"]},e.id)})})()]}),(0,W.jsx)(i.default,{style:_.backButton,onPress:()=>e.goBack(),children:(0,W.jsx)(l.default,{style:_.backButtonText,children:"\ud83c\udfe0 Powr\xf3t do menu"})})]}):(0,W.jsxs)(a.default,{style:[j.container,{backgroundColor:y}],children:[(0,W.jsxs)(a.default,{style:_.header,children:[(0,W.jsx)(i.default,{onPress:()=>e.goBack(),style:_.headerButton,children:(0,W.jsx)(l.default,{style:_.headerButtonText,children:"\u2190 Powr\xf3t"})}),(0,W.jsxs)(a.default,{style:_.headerCenter,children:[(0,W.jsx)(l.default,{style:_.headerTitle,children:"\ud83c\udfae Smoki"}),(0,W.jsxs)(l.default,{style:_.roundText,children:["Runda ",c]})]}),(0,W.jsx)(i.default,{onPress:()=>{k(!0)},style:_.headerButton,children:(0,W.jsx)(l.default,{style:_.headerButtonText,children:"Zako\u0144cz"})})]}),(0,W.jsx)(N.default,{style:_.playersList,contentContainerStyle:{padding:20},children:s.map(e=>{const t=e.totalScore>=101;return(0,W.jsxs)(a.default,{style:[_.playerCard,t&&_.eliminatedPlayerCard],children:[(0,W.jsxs)(a.default,{style:_.playerHeader,children:[(0,W.jsx)(l.default,{style:[_.playerName,t&&_.eliminatedPlayerName],children:e.name}),(0,W.jsxs)(l.default,{style:[_.playerScore,t&&_.eliminatedPlayerScore],children:[e.totalScore," pkt"]})]}),!x&&(0,W.jsxs)(a.default,{style:_.scoreInputContainer,children:[(0,W.jsxs)(l.default,{style:_.roundLabel,children:["Runda ",c,":"]}),(0,W.jsx)(i.default,{style:[_.scoreButton,t&&_.eliminatedScoreButton],onPress:()=>!t&&(e=>{E(e),P(!0)})(e),disabled:t,children:(0,W.jsx)(l.default,{style:[_.scoreButtonText,t&&_.eliminatedScoreButtonText],children:void 0!==h[e.id]?h[e.id].toString():"0"})})]}),e.rounds.length>0&&(0,W.jsxs)(a.default,{style:_.roundHistory,children:[(0,W.jsx)(l.default,{style:_.roundHistoryTitle,children:"Historia rund:"}),(0,W.jsx)(l.default,{style:_.roundHistoryText,children:e.rounds.join(", ")})]})]},e.id)})}),(0,W.jsx)(a.default,{style:_.submitButtonContainer,children:(0,W.jsx)(i.default,{style:_.submitButton,onPress:async()=>{if(!s.every(e=>void 0!==h[e.id]))return void alert("Wprowad\u017a wyniki dla wszystkich graczy!");const e=s.map(e=>Object.assign({},e,{totalScore:e.totalScore+(h[e.id]||0),rounds:[...e.rounds,h[e.id]||0]}));d(e),u(c+1),m({});try{const t={players:e,currentRound:c+1,lastUpdated:(new Date).toISOString()};if(F)await O(F,t,!1);else{const o=await(async(e,t,o=!1)=>{try{const r=(await v()).filter(e=>1===e.isCompleted),n={id:Date.now(),players:JSON.stringify(e),currentState:JSON.stringify(t),isCompleted:o?1:0,createdAt:(new Date).toISOString()};return r.push(n),await C.setItem(z,JSON.stringify(r)),n.id}catch(r){throw console.error("Error saving game:",r),r}})(e,t,!1);H(o)}console.log("Game state saved successfully")}catch(t){console.error("Error saving game state:",t)}},children:(0,W.jsxs)(l.default,{style:_.submitButtonText,children:["\u2705 Zatwierd\u017a rund\u0119 ",c]})})}),(0,W.jsx)(D.default,{visible:B,transparent:!0,animationType:"slide",onRequestClose:()=>k(!1),children:(0,W.jsx)(a.default,{style:_.modalOverlay,children:(0,W.jsxs)(a.default,{style:_.modalContent,children:[(0,W.jsx)(l.default,{style:_.modalTitle,children:"Zako\u0144czy\u0107 gr\u0119?"}),(0,W.jsxs)(l.default,{style:_.modalText,children:["Czy na pewno chcesz zako\u0144czy\u0107 gr\u0119 w rundzie ",c,"?"]}),(0,W.jsxs)(a.default,{style:_.modalButtons,children:[(0,W.jsx)(i.default,{style:[_.modalButton,{backgroundColor:p}],onPress:()=>k(!1),children:(0,W.jsx)(l.default,{style:_.modalButtonText,children:"Anuluj"})}),(0,W.jsx)(i.default,{style:[_.modalButton,{backgroundColor:f}],onPress:async()=>{const t=[...s].sort((e,t)=>e.totalScore-t.totalScore);if(F)try{const e={players:t,currentRound:c,lastUpdated:(new Date).toISOString(),finished:!0};await O(F,e,!0),console.log("Game manually ended and marked as completed")}catch(o){console.error("Error marking game as completed:",o)}if(!x)try{let e=1,o=null,r=0;for(let n=0;n<t.length;n++){const a=t[n];null!==o&&a.totalScore!==o?(e+=r,r=1):r++,await R(a.id,e),o=a.totalScore}console.log("Player statistics updated successfully with tie handling")}catch(o){console.error("Error updating player statistics:",o)}{const e=t.map((e,t)=>`${t+1}. ${e.name}: ${e.totalScore} pkt`).join("\n");alert(`Gra zako\u0144czona!\n\nWyniki:\n${e}`)}e.goBack()},children:(0,W.jsx)(l.default,{style:[_.modalButtonText,{color:"white"}],children:"Zako\u0144cz gr\u0119"})})]})]})})}),(0,W.jsx)($,{visible:T,onClose:()=>{P(!1),E(null)},onSubmit:e=>{I&&(((e,t)=>{let o=0;o=""===t||"-"===t?0:parseInt(t)||0,m(t=>Object.assign({},t,{[e]:o}))})(I.id,e),E(null))},title:I?`${I.name} - Runda ${c}`:"",currentValue:I&&h[I.id]?.toString()||""})]})};(0,r.default)(function(){const[e,t]=(0,n.useState)("MainMenu"),[o,r]=(0,n.useState)({});console.log("App component rendering on:","web","Current screen:",e);const a={navigate:(e,o={})=>{console.log("Navigate to:",e,"with params:",o),t(e),r(o)},goBack:()=>{console.log("Go back"),t("MainMenu"),r({})}};switch(e){case"Players":return(0,W.jsx)(A,{navigation:a});case"PlayerSelection":return(0,W.jsx)(V,{navigation:a,route:{params:o}});case"PlayerOrder":return(0,W.jsx)(L,{navigation:a,route:{params:o}});case"Game":return(0,W.jsx)(K,{navigation:a,route:{params:o}});default:return(0,W.jsx)(E,{navigation:a})}})}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.m=e,(()=>{var e=[];o.O=(t,r,n,a)=>{if(!r){var l=1/0;for(c=0;c<e.length;c++){for(var[r,n,a]=e[c],i=!0,s=0;s<r.length;s++)(!1&a||l>=a)&&Object.keys(o.O).every(e=>o.O[e](r[s]))?r.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[l,i,s]=r,d=0;if(l.some(t=>0!==e[t])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(s)var c=s(o)}for(t&&t(r);d<l.length;d++)a=l[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[513],()=>o(7936));r=o.O(r)})();
//# sourceMappingURL=main.861f34c3.js.map