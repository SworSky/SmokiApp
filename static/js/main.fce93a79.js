(()=>{"use strict";var e={7655:(e,t,o)=>{var r=o(9993),n=o(6665),a=o(3929),l=o(6283),i=o(9685),s=o(3701);const d="#FF6B35",c="#F7931E",u="#4CAF50",g="#FF9800",h="#F44336",f="#FFF3E0",y="#FFFFFF",m="#2C3E50",p="#7F8C8D",x="#E0E0E0",b="#000000",w=s.default.create({container:{flex:1,backgroundColor:f},centered:{flex:1,justifyContent:"center",alignItems:"center"},padding:{padding:20,paddingTop:80},margin:{margin:10},shadow:{shadowColor:b,shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},card:{backgroundColor:y,borderRadius:15,padding:20,marginVertical:10,shadowColor:b,shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},button:{backgroundColor:d,borderRadius:25,paddingVertical:15,paddingHorizontal:30,alignItems:"center",marginVertical:10,shadowColor:b,shadowOffset:{width:0,height:2},shadowOpacity:.25,shadowRadius:3.84,elevation:5},buttonText:{color:y,fontSize:18,fontWeight:"bold"},secondaryButton:{backgroundColor:c,borderRadius:25,paddingVertical:12,paddingHorizontal:25,alignItems:"center",marginVertical:8},outlineButton:{backgroundColor:"transparent",borderWidth:2,borderColor:d,borderRadius:25,paddingVertical:12,paddingHorizontal:25,alignItems:"center",justifyContent:"center",marginVertical:8},outlineButtonText:{color:d,fontSize:16,fontWeight:"bold",textAlign:"center"},title:{fontSize:24,fontWeight:"300",color:"rgba(255, 255, 255, 0.7)",textAlign:"center",marginBottom:30,marginTop:10},subtitle:{fontSize:22,fontWeight:"bold",color:m,marginBottom:15},text:{fontSize:16,color:m,lineHeight:24},textInput:{backgroundColor:y,borderRadius:10,padding:15,fontSize:16,borderWidth:1,borderColor:x,marginVertical:10},row:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},column:{flexDirection:"column"},flex1:{flex:1},textCenter:{textAlign:"center"},textBold:{fontWeight:"bold"},marginTop:{marginTop:20},marginBottom:{marginBottom:20}});let S;S={setItem:async(e,t)=>{try{localStorage.setItem(e,t)}catch(o){console.error("localStorage error:",o)}},getItem:async e=>{try{return localStorage.getItem(e)}catch(t){return console.error("localStorage error:",t),null}},removeItem:async e=>{try{localStorage.removeItem(e)}catch(t){console.error("localStorage error:",t)}}};const j=S;const C="smoki_players",B="smoki_games",z="smoki_game_rounds",k=async()=>{try{const e=await j.getItem(C);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting players:",e),[]}},T=async()=>{try{const e=await j.getItem(B);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting games:",e),[]}},v=async()=>{try{const e=await j.getItem(z);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting game rounds:",e),[]}},I=async()=>await k(),P=async(e,t)=>{try{const o=await k(),r=o.findIndex(t=>t.id===e);return-1!==r?(o[r].totalGames+=1,1===t?o[r].firstPlace+=1:2===t?o[r].secondPlace+=1:3===t&&(o[r].thirdPlace+=1),await j.setItem(C,JSON.stringify(o)),{success:!0}):{success:!1}}catch(o){throw console.error("Error updating player stats:",o),o}},O=async(e,t,o=!1)=>{try{const r=await T(),n=r.findIndex(t=>t.id===e);return-1!==n?(r[n].players=JSON.stringify(t.players),r[n].currentState=JSON.stringify(t),r[n].isCompleted=o?1:0,await j.setItem(B,JSON.stringify(r)),{success:!0}):{success:!1}}catch(r){throw console.error("Error updating game:",r),r}};var R=o(397);const W=({navigation:e})=>{const[t,o]=(0,n.useState)(!0),[r,s]=(0,n.useState)(!1),[c,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{h()},[]),(0,n.useEffect)(()=>{f();const e=setInterval(f,1e3);return()=>clearInterval(e)},[]);const h=async()=>{try{console.log("Initializing app..."),await(async()=>{try{const e=await k(),t=await T(),o=await v();return e&&void 0!==e.length||await j.setItem(C,JSON.stringify([])),t&&void 0!==t.length||await j.setItem(B,JSON.stringify([])),o&&void 0!==o.length||await j.setItem(z,JSON.stringify([])),Promise.resolve()}catch(e){return console.error("Error initializing web database:",e),Promise.resolve()}})(),console.log("Database initialized successfully"),await f(),console.log("Active game check completed")}catch(e){console.error("Error initializing app:",e)}finally{o(!1)}},f=async()=>{try{const e=await(async()=>{try{const e=(await T()).find(e=>0===e.isCompleted);return e?Object.assign({},e,{players:JSON.parse(e.players),currentState:JSON.parse(e.currentState)}):null}catch(e){return console.error("Error getting active game:",e),null}})();e?(s(!0),g(e)):(s(!1),g(null))}catch(e){console.error("Error checking for active game:",e),s(!1),g(null)}};return t?(0,R.jsx)(a.default,{style:[w.centered,{backgroundColor:d}],children:(0,R.jsx)(l.default,{style:{fontSize:24,color:"white"},children:"\ud83d\udc09 \u0141adowanie Smoki..."})}):(0,R.jsxs)(a.default,{style:[w.container,w.centered,{backgroundColor:d,overflow:"hidden"}],children:[(0,R.jsx)(l.default,{style:{fontSize:48,fontWeight:"bold",color:"white",marginBottom:20,textAlign:"center"},children:"\ud83d\udc09 SMOKI"}),(0,R.jsx)(l.default,{style:{fontSize:18,color:"white",marginBottom:40,textAlign:"center"},children:"by Ma\u015blak"}),r&&(0,R.jsx)(i.default,{style:{backgroundColor:u,padding:15,borderRadius:10,marginVertical:10,minWidth:200,alignItems:"center"},onPress:()=>{if(c){const t={id:c.id,players:c.players,currentRound:c.currentState.currentRound||1};e.navigate("Game",{gameData:t,resumeGame:!0})}},children:(0,R.jsx)(l.default,{style:{fontSize:18,color:"white",fontWeight:"bold"},children:"\u25b6\ufe0f Kontynuuj gr\u0119"})}),(0,R.jsx)(i.default,{style:{backgroundColor:"white",padding:15,borderRadius:10,marginVertical:10,minWidth:200,alignItems:"center"},onPress:()=>{e.navigate("Players")},children:(0,R.jsx)(l.default,{style:{fontSize:18,color:d,fontWeight:"bold"},children:"\ud83d\udc65 Gracze"})}),(0,R.jsx)(i.default,{style:{backgroundColor:"white",padding:15,borderRadius:10,marginVertical:10,minWidth:200,alignItems:"center"},onPress:()=>{e.navigate("PlayerSelection")},children:(0,R.jsx)(l.default,{style:{fontSize:18,color:d,fontWeight:"bold"},children:"\ud83c\udfae Nowa Gra"})})]})};var E=o(6773),D=o(8264),F=o(3454);const N={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:20,backgroundColor:d},backButton:{padding:10},backButtonText:{color:"white",fontSize:16,fontWeight:"bold"},title:{fontSize:24,fontWeight:"bold",color:"white"},addButton:{backgroundColor:"white",paddingHorizontal:15,paddingVertical:8,borderRadius:20},addButtonText:{color:d,fontWeight:"bold"},playersList:{flex:1},playerCard:{backgroundColor:"white",borderRadius:10,padding:15,marginVertical:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},playerInfo:{flex:1},playerName:{fontSize:18,fontWeight:"bold",color:m,marginBottom:5},playerStats:{fontSize:14,color:p},playerActions:{flexDirection:"row",gap:10},actionButton:{width:40,height:40,borderRadius:20,justifyContent:"center",alignItems:"center"},actionButtonText:{fontSize:16},emptyState:{alignItems:"center",marginTop:50},emptyStateText:{fontSize:16,color:p,textAlign:"center"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"white",borderRadius:20,padding:30,width:"80%",maxWidth:400},modalTitle:{fontSize:20,fontWeight:"bold",textAlign:"center",marginBottom:20,color:m},textInput:{borderWidth:1,borderColor:x,borderRadius:10,padding:15,fontSize:16,marginBottom:20},modalButtons:{flexDirection:"row",justifyContent:"space-between",gap:10},modalButton:{flex:1,padding:15,borderRadius:10,alignItems:"center"},modalButtonText:{fontSize:16,fontWeight:"bold",color:"white"}},A=({navigation:e})=>{const[t,o]=(0,n.useState)([]),[r,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(null),[y,x]=(0,n.useState)(""),[b,S]=(0,n.useState)(!0);(0,n.useEffect)(()=>{B()},[]);const B=async()=>{try{S(!0);const e=await I();o(e||[])}catch(e){console.error("Error loading players:",e),o([])}finally{S(!1)}},z=async e=>{if(confirm("Czy na pewno chcesz usun\u0105\u0107 tego gracza?"))try{await(async e=>{try{const t=(await k()).filter(t=>t.id!==e);return await j.setItem(C,JSON.stringify(t)),{success:!0}}catch(t){throw console.error("Error deleting player:",t),t}})(e),await B()}catch(t){console.error("Error deleting player:",t)}};return b?(0,R.jsx)(a.default,{style:[w.centered,{backgroundColor:f}],children:(0,R.jsx)(l.default,{style:{fontSize:24,color:m},children:"\u0141adowanie graczy..."})}):(0,R.jsxs)(a.default,{style:[w.container,{backgroundColor:f}],children:[(0,R.jsxs)(a.default,{style:N.header,children:[(0,R.jsx)(i.default,{onPress:e.goBack,style:N.backButton,children:(0,R.jsx)(l.default,{style:N.backButtonText,children:"\u2190 Powr\xf3t"})}),(0,R.jsx)(l.default,{style:N.title,children:"\ud83d\udc65 Gracze"}),(0,R.jsx)(i.default,{onPress:()=>s(!0),style:N.addButton,children:(0,R.jsx)(l.default,{style:N.addButtonText,children:"+ Dodaj"})})]}),(0,R.jsx)(F.default,{style:N.playersList,contentContainerStyle:{padding:20},children:0===t.length?(0,R.jsx)(a.default,{style:N.emptyState,children:(0,R.jsx)(l.default,{style:N.emptyStateText,children:"Brak graczy. Dodaj pierwszego gracza!"})}):t.map(e=>(0,R.jsxs)(a.default,{style:N.playerCard,children:[(0,R.jsxs)(a.default,{style:N.playerInfo,children:[(0,R.jsx)(l.default,{style:N.playerName,children:e.name}),(0,R.jsxs)(l.default,{style:N.playerStats,children:["\ud83c\udfc6 ",e.firstPlace," \ud83e\udd48 ",e.secondPlace," \ud83e\udd49 ",e.thirdPlace," | Gry: ",e.totalGames]})]}),(0,R.jsxs)(a.default,{style:N.playerActions,children:[(0,R.jsx)(i.default,{style:[N.actionButton,{backgroundColor:g}],onPress:()=>(e=>{u(e),x(e.name),s(!0)})(e),children:(0,R.jsx)(l.default,{style:N.actionButtonText,children:"\u270f\ufe0f"})}),(0,R.jsx)(i.default,{style:[N.actionButton,{backgroundColor:h}],onPress:()=>z(e.id),children:(0,R.jsx)(l.default,{style:N.actionButtonText,children:"\ud83d\uddd1\ufe0f"})})]})]},e.id))}),(0,R.jsx)(D.default,{visible:r,transparent:!0,animationType:"slide",onRequestClose:()=>s(!1),children:(0,R.jsx)(a.default,{style:N.modalOverlay,children:(0,R.jsxs)(a.default,{style:N.modalContent,children:[(0,R.jsx)(l.default,{style:N.modalTitle,children:c?"Edytuj gracza":"Dodaj gracza"}),(0,R.jsx)(E.default,{style:N.textInput,placeholder:"Imi\u0119 gracza",value:y,onChangeText:x,autoFocus:!0}),(0,R.jsxs)(a.default,{style:N.modalButtons,children:[(0,R.jsx)(i.default,{style:[N.modalButton,{backgroundColor:p}],onPress:()=>{s(!1),x(""),u(null)},children:(0,R.jsx)(l.default,{style:N.modalButtonText,children:"Anuluj"})}),(0,R.jsx)(i.default,{style:[N.modalButton,{backgroundColor:d}],onPress:async()=>{if(y.trim())try{c?await(async(e,t)=>{try{const o=await k(),r=o.findIndex(t=>t.id===e);return-1!==r?(o[r].name=t,await j.setItem(C,JSON.stringify(o)),{success:!0}):{success:!1}}catch(o){throw console.error("Error updating player:",o),o}})(c.id,y.trim()):await(async e=>{try{const t=await k(),o={id:Date.now(),name:e,totalGames:0,firstPlace:0,secondPlace:0,thirdPlace:0};if(t.find(t=>t.name===e))throw new Error("Player already exists");return t.push(o),await j.setItem(C,JSON.stringify(t)),o.id}catch(t){throw console.error("Error adding player:",t),t}})(y.trim()),await B(),s(!1),x(""),u(null)}catch(e){console.error("Error saving player:",e),alert("B\u0142\u0105d: "+e.message)}},children:(0,R.jsx)(l.default,{style:[N.modalButtonText,{color:"white"}],children:c?"Zapisz":"Dodaj"})})]})]})})})]})},H={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:20,backgroundColor:d},backButton:{padding:10},backButtonText:{color:"white",fontSize:16,fontWeight:"bold"},title:{fontSize:20,fontWeight:"bold",color:"white"},counterContainer:{backgroundColor:"white",paddingHorizontal:12,paddingVertical:6,borderRadius:15},counterText:{color:d,fontWeight:"bold",fontSize:14},selectedSection:{backgroundColor:"white",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},selectedTitle:{fontSize:16,fontWeight:"bold",color:m,marginBottom:10},selectedPlayersContainer:{flexDirection:"row",gap:10},selectedPlayerChip:{backgroundColor:d,paddingHorizontal:12,paddingVertical:6,borderRadius:15},selectedPlayerChipText:{color:"white",fontSize:12,fontWeight:"bold"},playersList:{flex:1,marginTop:10},playerCard:{backgroundColor:"white",borderRadius:10,padding:15,marginVertical:5,flexDirection:"row",justifyContent:"space-between",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3,borderWidth:2,borderColor:"transparent"},selectedPlayerCard:{borderColor:d,backgroundColor:"#FFF7F3"},playerInfo:{flex:1},playerName:{fontSize:18,fontWeight:"bold",color:m,marginBottom:5},selectedPlayerName:{color:d},playerStats:{fontSize:14,color:p},selectedPlayerStats:{color:d},selectionIndicator:{width:30,height:30,borderRadius:15,borderWidth:2,borderColor:p,justifyContent:"center",alignItems:"center"},selectedIndicator:{backgroundColor:d,borderColor:d},selectionText:{fontSize:16,fontWeight:"bold",color:p},emptyState:{alignItems:"center",marginTop:50},emptyStateText:{fontSize:16,color:p,textAlign:"center",marginBottom:20},addPlayersButton:{backgroundColor:d,paddingHorizontal:20,paddingVertical:12,borderRadius:10},addPlayersButtonText:{color:"white",fontSize:16,fontWeight:"bold"},startButtonContainer:{padding:20,backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:-2},shadowOpacity:.1,shadowRadius:4,elevation:5},startButton:{backgroundColor:u,padding:18,borderRadius:12,alignItems:"center"},startButtonText:{color:"white",fontSize:18,fontWeight:"bold"}},G=({navigation:e})=>{const[t,o]=(0,n.useState)([]),[r,s]=(0,n.useState)([]),[d,c]=(0,n.useState)(!0);(0,n.useEffect)(()=>{u()},[]);const u=async()=>{try{c(!0);const e=await I();o(e||[])}catch(e){console.error("Error loading players:",e),o([])}finally{c(!1)}};return d?(0,R.jsx)(a.default,{style:[w.centered,{backgroundColor:f}],children:(0,R.jsx)(l.default,{style:{fontSize:24,color:m},children:"\u0141adowanie graczy..."})}):(0,R.jsxs)(a.default,{style:[w.container,{backgroundColor:f}],children:[(0,R.jsxs)(a.default,{style:H.header,children:[(0,R.jsx)(i.default,{onPress:e.goBack,style:H.backButton,children:(0,R.jsx)(l.default,{style:H.backButtonText,children:"\u2190 Powr\xf3t"})}),(0,R.jsx)(l.default,{style:H.title,children:"\ud83c\udfae Wybierz Graczy"}),(0,R.jsx)(a.default,{style:H.counterContainer,children:(0,R.jsxs)(l.default,{style:H.counterText,children:[r.length,"/6"]})})]}),(0,R.jsx)(F.default,{style:H.playersList,contentContainerStyle:{padding:20},children:0===t.length?(0,R.jsxs)(a.default,{style:H.emptyState,children:[(0,R.jsx)(l.default,{style:H.emptyStateText,children:'Brak graczy. Dodaj graczy w sekcji "Gracze" przed rozpocz\u0119ciem gry!'}),(0,R.jsx)(i.default,{style:H.addPlayersButton,onPress:()=>e.navigate("Players"),children:(0,R.jsx)(l.default,{style:H.addPlayersButtonText,children:"\ud83d\udc65 Dodaj Graczy"})})]}):t.map(e=>{const t=r.find(t=>t.id===e.id);return(0,R.jsxs)(i.default,{style:[H.playerCard,t&&H.selectedPlayerCard],onPress:()=>(e=>{r.find(t=>t.id===e.id)?s(r.filter(t=>t.id!==e.id)):r.length<6?s([...r,e]):alert("Maksymalnie 6 graczy mo\u017ce bra\u0107 udzia\u0142 w grze!")})(e),children:[(0,R.jsxs)(a.default,{style:H.playerInfo,children:[(0,R.jsx)(l.default,{style:[H.playerName,t&&H.selectedPlayerName],children:e.name}),(0,R.jsxs)(l.default,{style:[H.playerStats,t&&H.selectedPlayerStats],children:["\ud83c\udfc6 ",e.firstPlace," \ud83e\udd48 ",e.secondPlace," \ud83e\udd49 ",e.thirdPlace," | Gry: ",e.totalGames]})]}),(0,R.jsx)(a.default,{style:[H.selectionIndicator,t&&H.selectedIndicator],children:(0,R.jsx)(l.default,{style:H.selectionText,children:t?"\u2713":"\u25cb"})})]},e.id)})}),r.length>=2&&(0,R.jsx)(a.default,{style:H.startButtonContainer,children:(0,R.jsx)(i.default,{style:H.startButton,onPress:()=>{r.length<2?alert("Wybierz co najmniej 2 graczy!"):e.navigate("Game",{selectedPlayers:r})},children:(0,R.jsxs)(l.default,{style:H.startButtonText,children:["\u27a1\ufe0f Ustaw kolejno\u015b\u0107 (",r.length," graczy)"]})})})]})},V={modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.7)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"white",borderRadius:20,padding:20,width:"85%",maxWidth:350},modalTitle:{fontSize:18,fontWeight:"bold",textAlign:"center",marginBottom:20,color:m},display:{backgroundColor:"#F5F5F5",borderRadius:10,padding:20,marginBottom:20,alignItems:"center"},displayText:{fontSize:32,fontWeight:"bold",color:d,minHeight:40},numpad:{marginBottom:20},numpadRow:{flexDirection:"row",justifyContent:"space-between",marginBottom:10},numberButton:{width:70,height:70,borderRadius:35,backgroundColor:d,justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:3},numberButtonText:{fontSize:24,fontWeight:"bold",color:"white"},actionButton:{width:70,height:70,borderRadius:35,backgroundColor:p,justifyContent:"center",alignItems:"center",shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.2,shadowRadius:4,elevation:3},actionButtonText:{fontSize:20,fontWeight:"bold",color:"white"},actionButtons:{flexDirection:"row",justifyContent:"space-between",gap:15},cancelButton:{flex:1,padding:15,borderRadius:10,backgroundColor:p,alignItems:"center"},cancelButtonText:{fontSize:16,fontWeight:"bold",color:"white"},submitButton:{flex:1,padding:15,borderRadius:10,backgroundColor:u,alignItems:"center"},submitButtonText:{fontSize:16,fontWeight:"bold",color:"white"}},J=({visible:e,onClose:t,onSubmit:o,title:r,currentValue:s=""})=>{const[d,c]=n.useState(s);n.useEffect(()=>{c(s)},[s,e]);const u=e=>(0,R.jsx)(i.default,{style:V.numberButton,onPress:()=>(e=>{d.length<4&&c(d+e)})(e.toString()),children:(0,R.jsx)(l.default,{style:V.numberButtonText,children:e})},e);return(0,R.jsx)(D.default,{visible:e,transparent:!0,animationType:"slide",onRequestClose:t,children:(0,R.jsx)(a.default,{style:V.modalOverlay,children:(0,R.jsxs)(a.default,{style:V.modalContent,children:[(0,R.jsx)(l.default,{style:V.modalTitle,children:r}),(0,R.jsx)(a.default,{style:V.display,children:(0,R.jsx)(l.default,{style:V.displayText,children:d||"0"})}),(0,R.jsxs)(a.default,{style:V.numpad,children:[(0,R.jsxs)(a.default,{style:V.numpadRow,children:[u(1),u(2),u(3)]}),(0,R.jsxs)(a.default,{style:V.numpadRow,children:[u(4),u(5),u(6)]}),(0,R.jsxs)(a.default,{style:V.numpadRow,children:[u(7),u(8),u(9)]}),(0,R.jsxs)(a.default,{style:V.numpadRow,children:[(0,R.jsx)(i.default,{style:V.actionButton,onPress:()=>{""===d||"0"===d?c("-"):"-"===d?c(""):d.startsWith("-")?c(d.substring(1)):c("-"+d)},children:(0,R.jsx)(l.default,{style:V.actionButtonText,children:"+/-"})}),u(0),(0,R.jsx)(i.default,{style:V.actionButton,onPress:()=>{c(d.slice(0,-1))},children:(0,R.jsx)(l.default,{style:V.actionButtonText,children:"\u232b"})})]})]}),(0,R.jsxs)(a.default,{style:V.actionButtons,children:[(0,R.jsx)(i.default,{style:V.cancelButton,onPress:t,children:(0,R.jsx)(l.default,{style:V.cancelButtonText,children:"Anuluj"})}),(0,R.jsx)(i.default,{style:V.submitButton,onPress:()=>{o(d),t()},children:(0,R.jsx)(l.default,{style:V.submitButtonText,children:"OK"})})]})]})})})},M={header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:20,paddingTop:60,paddingBottom:15,backgroundColor:d},headerButton:{padding:10},headerButtonText:{color:"white",fontSize:14,fontWeight:"bold"},headerCenter:{alignItems:"center"},headerTitle:{fontSize:20,fontWeight:"bold",color:"white"},roundText:{fontSize:14,color:"white",opacity:.9},rulesContainer:{backgroundColor:"#E3F2FD",padding:15,marginHorizontal:20,marginTop:10,borderRadius:10},rulesText:{fontSize:14,color:m,textAlign:"center"},playersList:{flex:1,marginTop:10},playerCard:{backgroundColor:"white",borderRadius:12,padding:15,marginVertical:8,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},eliminatedPlayerCard:{backgroundColor:"#FFEBEE",opacity:.7},playerHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:10},playerName:{fontSize:18,fontWeight:"bold",color:m},eliminatedPlayerName:{color:h,textDecorationLine:"line-through"},playerScore:{fontSize:20,fontWeight:"bold",color:d},eliminatedPlayerScore:{color:h},scoreInputContainer:{flexDirection:"row",alignItems:"center",marginBottom:10},roundLabel:{fontSize:16,color:m,marginRight:10,flex:1},scoreButton:{borderWidth:2,borderColor:d,borderRadius:8,padding:12,backgroundColor:d,width:80,alignItems:"center"},scoreButtonText:{fontSize:18,fontWeight:"bold",color:"white"},eliminatedScoreButton:{backgroundColor:"#F5F5F5",borderColor:p},eliminatedScoreButtonText:{color:p},roundHistory:{marginTop:5},roundHistoryTitle:{fontSize:12,color:p,marginBottom:2},roundHistoryText:{fontSize:12,color:p},submitButtonContainer:{padding:20,backgroundColor:"white",shadowColor:"#000",shadowOffset:{width:0,height:-2},shadowOpacity:.1,shadowRadius:4,elevation:5},submitButton:{backgroundColor:u,padding:18,borderRadius:12,alignItems:"center"},submitButtonText:{color:"white",fontSize:16,fontWeight:"bold"},gameEndTitle:{fontSize:32,fontWeight:"bold",color:"white",textAlign:"center",marginBottom:20},winnerText:{fontSize:24,fontWeight:"bold",color:"white",textAlign:"center",marginBottom:10},winnerScore:{fontSize:18,color:"white",textAlign:"center",marginBottom:30},finalRanking:{backgroundColor:"white",borderRadius:15,padding:20,marginHorizontal:20,marginBottom:30},rankingTitle:{fontSize:18,fontWeight:"bold",color:m,textAlign:"center",marginBottom:15},rankingItem:{fontSize:16,color:m,textAlign:"center",marginVertical:3},backButton:{backgroundColor:"white",paddingHorizontal:30,paddingVertical:15,borderRadius:25,marginHorizontal:40},backButtonText:{color:u,fontSize:18,fontWeight:"bold",textAlign:"center"},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"center",alignItems:"center"},modalContent:{backgroundColor:"white",borderRadius:20,padding:30,width:"80%",maxWidth:400},modalTitle:{fontSize:20,fontWeight:"bold",textAlign:"center",marginBottom:15,color:m},modalText:{fontSize:16,textAlign:"center",marginBottom:25,color:p},modalButtons:{flexDirection:"row",justifyContent:"space-between",gap:10},modalButton:{flex:1,padding:15,borderRadius:10,alignItems:"center"},modalButtonText:{fontSize:16,fontWeight:"bold",color:"white"}},L=({navigation:e,route:t})=>{const{gameData:o,resumeGame:r,selectedPlayers:s}=t.params,[d,c]=(0,n.useState)(r&&o&&o.players?o.players:s?s.map(e=>Object.assign({},e,{totalScore:0,rounds:[]})):o&&o.players?o.players:[]),[g,y]=(0,n.useState)(r&&o.currentRound?o.currentRound:1),[m,x]=(0,n.useState)({}),[b,S]=(0,n.useState)(!1),[C,z]=(0,n.useState)(null),[k,v]=(0,n.useState)(!1),[I,W]=(0,n.useState)(!1),[E,N]=(0,n.useState)(null),[A,H]=(0,n.useState)(r?o.id:null);(0,n.useEffect)(()=>{G()},[d]);const G=async()=>{if(d.filter(e=>e.totalScore>=101).length>0){const t=[...d].sort((e,t)=>e.totalScore-t.totalScore),o=t[0].totalScore,r=t.filter(e=>e.totalScore===o);if(z(r[0]),S(!0),A)try{const e={players:t,currentRound:g,lastUpdated:(new Date).toISOString(),finished:!0};await O(A,e,!0),console.log("Game marked as completed")}catch(e){console.error("Error marking game as completed:",e)}if(t.some(e=>e.totalScore>50))try{let e=1,o=null,r=0;for(let n=0;n<t.length;n++){const a=t[n];null!==o&&a.totalScore!==o?(e+=r,r=1):r++,await P(a.id,e),o=a.totalScore}console.log("Player statistics updated successfully with tie handling")}catch(e){console.error("Error updating player statistics:",e)}else console.log("No player has score higher than 50, skipping statistics update")}};return b&&C?(0,R.jsxs)(a.default,{style:[w.container,w.centered,{backgroundColor:u}],children:[(0,R.jsx)(l.default,{style:M.gameEndTitle,children:"\ud83c\udf89 Gra zako\u0144czona! \ud83c\udf89"}),(0,R.jsxs)(l.default,{style:M.winnerText,children:["Zwyci\u0119zca: ",C.name]}),(0,R.jsxs)(l.default,{style:M.winnerScore,children:["Wynik: ",C.totalScore," punkt\xf3w"]}),(0,R.jsxs)(a.default,{style:M.finalRanking,children:[(0,R.jsx)(l.default,{style:M.rankingTitle,children:"Ko\u0144cowy ranking:"}),(()=>{const e=[...d].sort((e,t)=>e.totalScore-t.totalScore);let t=1,o=null,r=0;return e.map((e,n)=>{null!==o&&e.totalScore!==o?(t+=r,r=1):r++;const a=t;return o=e.totalScore,(0,R.jsxs)(l.default,{style:M.rankingItem,children:[a,". ",e.name,": ",e.totalScore," pkt",1===a&&" \ud83c\udfc6",2===a&&" \ud83e\udd48",3===a&&" \ud83e\udd49"]},e.id)})})()]}),(0,R.jsx)(i.default,{style:M.backButton,onPress:()=>e.goBack(),children:(0,R.jsx)(l.default,{style:M.backButtonText,children:"\ud83c\udfe0 Powr\xf3t do menu"})})]}):(0,R.jsxs)(a.default,{style:[w.container,{backgroundColor:f}],children:[(0,R.jsxs)(a.default,{style:M.header,children:[(0,R.jsx)(i.default,{onPress:()=>e.goBack(),style:M.headerButton,children:(0,R.jsx)(l.default,{style:M.headerButtonText,children:"\u2190 Powr\xf3t"})}),(0,R.jsxs)(a.default,{style:M.headerCenter,children:[(0,R.jsx)(l.default,{style:M.headerTitle,children:"\ud83c\udfae Smoki"}),(0,R.jsxs)(l.default,{style:M.roundText,children:["Runda ",g]})]}),(0,R.jsx)(i.default,{onPress:()=>{v(!0)},style:M.headerButton,children:(0,R.jsx)(l.default,{style:M.headerButtonText,children:"Zako\u0144cz"})})]}),(0,R.jsx)(F.default,{style:M.playersList,contentContainerStyle:{padding:20},children:d.map(e=>{const t=e.totalScore>=101;return(0,R.jsxs)(a.default,{style:[M.playerCard,t&&M.eliminatedPlayerCard],children:[(0,R.jsxs)(a.default,{style:M.playerHeader,children:[(0,R.jsx)(l.default,{style:[M.playerName,t&&M.eliminatedPlayerName],children:e.name}),(0,R.jsxs)(l.default,{style:[M.playerScore,t&&M.eliminatedPlayerScore],children:[e.totalScore," pkt"]})]}),!b&&(0,R.jsxs)(a.default,{style:M.scoreInputContainer,children:[(0,R.jsxs)(l.default,{style:M.roundLabel,children:["Runda ",g,":"]}),(0,R.jsx)(i.default,{style:[M.scoreButton,t&&M.eliminatedScoreButton],onPress:()=>!t&&(e=>{N(e),W(!0)})(e),disabled:t,children:(0,R.jsx)(l.default,{style:[M.scoreButtonText,t&&M.eliminatedScoreButtonText],children:void 0!==m[e.id]?m[e.id].toString():"0"})})]}),e.rounds.length>0&&(0,R.jsxs)(a.default,{style:M.roundHistory,children:[(0,R.jsx)(l.default,{style:M.roundHistoryTitle,children:"Historia rund:"}),(0,R.jsx)(l.default,{style:M.roundHistoryText,children:e.rounds.join(", ")})]})]},e.id)})}),(0,R.jsx)(a.default,{style:M.submitButtonContainer,children:(0,R.jsx)(i.default,{style:M.submitButton,onPress:async()=>{if(!d.every(e=>void 0!==m[e.id]))return void alert("Wprowad\u017a wyniki dla wszystkich graczy!");const e=d.map(e=>Object.assign({},e,{totalScore:e.totalScore+(m[e.id]||0),rounds:[...e.rounds,m[e.id]||0]}));c(e),y(g+1),x({});try{const t={players:e,currentRound:g+1,lastUpdated:(new Date).toISOString()};if(A)await O(A,t,!1);else{const o=await(async(e,t,o=!1)=>{try{const r=(await T()).filter(e=>1===e.isCompleted),n={id:Date.now(),players:JSON.stringify(e),currentState:JSON.stringify(t),isCompleted:o?1:0,createdAt:(new Date).toISOString()};return r.push(n),await j.setItem(B,JSON.stringify(r)),n.id}catch(r){throw console.error("Error saving game:",r),r}})(e,t,!1);H(o)}console.log("Game state saved successfully")}catch(t){console.error("Error saving game state:",t)}},children:(0,R.jsxs)(l.default,{style:M.submitButtonText,children:["\u2705 Zatwierd\u017a rund\u0119 ",g]})})}),(0,R.jsx)(D.default,{visible:k,transparent:!0,animationType:"slide",onRequestClose:()=>v(!1),children:(0,R.jsx)(a.default,{style:M.modalOverlay,children:(0,R.jsxs)(a.default,{style:M.modalContent,children:[(0,R.jsx)(l.default,{style:M.modalTitle,children:"Zako\u0144czy\u0107 gr\u0119?"}),(0,R.jsxs)(l.default,{style:M.modalText,children:["Czy na pewno chcesz zako\u0144czy\u0107 gr\u0119 w rundzie ",g,"?"]}),(0,R.jsxs)(a.default,{style:M.modalButtons,children:[(0,R.jsx)(i.default,{style:[M.modalButton,{backgroundColor:p}],onPress:()=>v(!1),children:(0,R.jsx)(l.default,{style:M.modalButtonText,children:"Anuluj"})}),(0,R.jsx)(i.default,{style:[M.modalButton,{backgroundColor:h}],onPress:async()=>{const t=[...d].sort((e,t)=>e.totalScore-t.totalScore);if(A)try{const e={players:t,currentRound:g,lastUpdated:(new Date).toISOString(),finished:!0};await O(A,e,!0),console.log("Game manually ended and marked as completed")}catch(o){console.error("Error marking game as completed:",o)}if(!b)try{let e=1,o=null,r=0;for(let n=0;n<t.length;n++){const a=t[n];null!==o&&a.totalScore!==o?(e+=r,r=1):r++,await P(a.id,e),o=a.totalScore}console.log("Player statistics updated successfully with tie handling")}catch(o){console.error("Error updating player statistics:",o)}{const e=t.map((e,t)=>`${t+1}. ${e.name}: ${e.totalScore} pkt`).join("\n");alert(`Gra zako\u0144czona!\n\nWyniki:\n${e}`)}e.goBack()},children:(0,R.jsx)(l.default,{style:[M.modalButtonText,{color:"white"}],children:"Zako\u0144cz gr\u0119"})})]})]})})}),(0,R.jsx)(J,{visible:I,onClose:()=>{W(!1),N(null)},onSubmit:e=>{E&&(((e,t)=>{let o=0;o=""===t||"-"===t?0:parseInt(t)||0,x(t=>Object.assign({},t,{[e]:o}))})(E.id,e),N(null))},title:E?`${E.name} - Runda ${g}`:"",currentValue:E&&m[E.id]?.toString()||""})]})};(0,r.default)(function(){const[e,t]=(0,n.useState)("MainMenu"),[o,r]=(0,n.useState)({});console.log("App component rendering on:","web","Current screen:",e);const a={navigate:(e,o={})=>{console.log("Navigate to:",e,"with params:",o),t(e),r(o)},goBack:()=>{console.log("Go back"),t("MainMenu"),r({})}};switch(e){case"Players":return(0,R.jsx)(A,{navigation:a});case"PlayerSelection":return(0,R.jsx)(G,{navigation:a,route:{params:o}});case"Game":return(0,R.jsx)(L,{navigation:a,route:{params:o}});default:return(0,R.jsx)(W,{navigation:a})}})}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.m=e,(()=>{var e=[];o.O=(t,r,n,a)=>{if(!r){var l=1/0;for(c=0;c<e.length;c++){for(var[r,n,a]=e[c],i=!0,s=0;s<r.length;s++)(!1&a||l>=a)&&Object.keys(o.O).every(e=>o.O[e](r[s]))?r.splice(s--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[l,i,s]=r,d=0;if(l.some(t=>0!==e[t])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(s)var c=s(o)}for(t&&t(r);d<l.length;d++)a=l[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[513],()=>o(7655));r=o.O(r)})();
//# sourceMappingURL=main.fce93a79.js.map